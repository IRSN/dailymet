<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='By "design function" we a function building a "design matrix"
X with its columns being functions \(X_i(t)\) where
\(t\) is the time (actually a date). Each row of the matrix
corresponds to a value of the time. It is assumed that the
time is the first formal argument of the function. The name of
this argument is arbitrary. This allows to use design functions
with different names fot the 1-st argument such as "t",
"date", "Date", ...'><title>Create variables by using "design functions" of the date such as
trigonometric, polynomial, splines, ... — designVars • dailymet</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create variables by using " design functions of the date such as trigonometric polynomial splines ... designvars><meta property="og:description" content='By "design function" we a function building a "design matrix"
X with its columns being functions \(X_i(t)\) where
\(t\) is the time (actually a date). Each row of the matrix
corresponds to a value of the time. It is assumed that the
time is the first formal argument of the function. The name of
this argument is arbitrary. This allows to use design functions
with different names fot the 1-st argument such as "t",
"date", "Date", ...'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dailymet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.7</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Intro.html">R Package `dailymet`: Overview</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create variables by using "design functions" of the date such as
trigonometric, polynomial, splines, ...</h1>
      
      <div class="d-none name"><code>designVars.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>By "design function" we a function building a "design matrix"
<code>X</code> with its columns being functions \(X_i(t)\) where
\(t\) is the time (actually a date). Each row of the matrix
corresponds to a value of the time. It is assumed that <em>the
time is the first formal argument of the function</em>. The name of
this argument is arbitrary. This allows to use design functions
with different names fot the 1-st argument such as <code>"t"</code>,
<code>"date"</code>, <code>"Date"</code>, ...</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">designVars</span><span class="op">(</span><span class="va">designList</span>, <span class="va">dt</span>, trace <span class="op">=</span> <span class="fl">0</span>, dropDup <span class="op">=</span> <span class="st">"Cst"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>designList</dt>
<dd><p>A list with a specific structure describing the
design functions to evaluate, and the arguments (except the
date) to use. Each element of the list is itself a list with
the two elements named <code>what</code> and <code>args</code> as
<code><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></code>. The element <code>what</code> contains the
name of the design function and the element <code>args</code>
contains the named list of values for the arguments of
<code>what</code>, <em>with the first argument omitted</em>.</p></dd>


<dt>dt</dt>
<dd><p>A "date" vector on which the design functions will be
evaluated. This should be an object with class <code>"Date"</code>
or an object that will be coerced to this class e.g. a
character vector with a suitable format.</p></dd>


<dt>trace</dt>
<dd><p>Integer level of verbosity</p></dd>


<dt>dropDup</dt>
<dd><p>Character giving the names of variables that must
be dropped when they are duplicated across designs.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame with <code>length(dt)</code> rows containing the
    new variables.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Any design function used should fulfill the following
requirements.</p>
<ol><li><p>The first argument must be the date. The name of this
      argument will not be used in the call.</p></li>
<li><p>The returned value should be an object inheriting from the
       <code>"matrix"</code> class with suitable column names. For
       compatibility reasons, it can also be a list containing the
       design matrix as its element named <code>"X"</code>.</p></li>
</ol><p>The call to a design function should mention <code>Date</code> as the
first argument. This call refers to the <code>dailyMet</code> object
used, from which the <code>Date</code> column will be used.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The naming of the elements of the list given in
    <code>designList</code> is arbitrary and does not impact the result.
    The names can be used to make code clearer.</p>
    </div>
    <div class="section level2">
    <h2 id="caution">Caution<a class="anchor" aria-label="anchor" href="#caution"></a></h2>
    <p>When several designs are used, some conflit may
    arise because some names in the design matrices are
    identical. Unless the corresponding names are in
    <code>dropDup</code>, the latest variable will be automatically
    renamed as in <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code>. For instance if two
    variables <code>"t1"</code> then the second one will be renamed
    <code>"t1.1"</code>, see <b>Examples</b>. This is a possible source
    of confusion, and good options could be either to drop this
    variable or to wrap the design function into another function
    which uses different column names.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/IRSN/NSGEV/" class="external-link">NSGEV</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">desList</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"sinAndCos"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>what <span class="op">=</span> <span class="st">"tsDesign"</span>,</span></span>
<span class="r-in"><span>                              args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"trigo"</span>, df <span class="op">=</span> <span class="fl">7</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           <span class="st">"polys"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>what <span class="op">=</span> <span class="st">"tsDesign"</span>,</span></span>
<span class="r-in"><span>                          args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"polynom"</span>, df <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           <span class="st">"breaks"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>what <span class="op">=</span> <span class="st">"NSGEV::breaksX"</span>,</span></span>
<span class="r-in"><span>                           args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1970-01-01"</span>, <span class="st">"1990-01-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">des1</span> <span class="op">&lt;-</span> <span class="fu">designVars</span><span class="op">(</span><span class="va">desList</span>, dt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021-01-01"</span>, <span class="st">"2021-01-02"</span><span class="op">)</span>, trace <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">des2</span> <span class="op">&lt;-</span> <span class="fu">designVars</span><span class="op">(</span><span class="va">desList</span>, dt <span class="op">=</span> <span class="va">Rennes</span><span class="op">$</span><span class="va">Date</span>, trace <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">des1</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">des2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    o evaluation of `tsDesign`. Date is added in 1-st arg `dt`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    o evaluation of `tsDesign`. Date is added in 1-st arg `dt`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    o evaluation of `NSGEV::breaksX`. Date is added in 1-st arg `date`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    o evaluation of `tsDesign`. Date is added in 1-st arg `dt`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    o evaluation of `tsDesign`. Date is added in 1-st arg `dt`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    o evaluation of `NSGEV::breaksX`. Date is added in 1-st arg `date`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Cst     cosj1      sinj1     cosj2      sinj2     cosj3     sinj3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-02   1 0.9994082 0.03439806 0.9976335 0.06875541 0.9946781 0.1030314</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-03   1 0.9986686 0.05158437 0.9946781 0.10303138 0.9880390 0.1542040</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-04   1 0.9976335 0.06875541 0.9905454 0.13718540 0.9787691 0.2049661</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-05   1 0.9963032 0.08590610 0.9852403 0.17117706 0.9668929 0.2551824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-06   1 0.9946781 0.10303138 0.9787691 0.20496611 0.9524422 0.3047192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-07   1 0.9927586 0.12012617 0.9711394 0.23851258 0.9354554 0.3534447</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   t1       t2      t1.1 t1_1970 t1_1990</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-02 -38.82957 1507.735 -24.99658       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-03 -38.82683 1507.523 -24.99384       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-04 -38.82409 1507.310 -24.99110       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-05 -38.82136 1507.098 -24.98836       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-06 -38.81862 1506.885 -24.98563       0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1945-01-07 -38.81588 1506.673 -24.98289       0       0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Yves Deville.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

